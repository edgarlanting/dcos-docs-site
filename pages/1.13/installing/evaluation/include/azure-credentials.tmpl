# Install and configure the Azure CLI

1. Set up an [Azure Resource Manager account](https://azure.microsoft.com/en-us/free/) if you don't already have on. Make sure to have at least one [user role set up](https://docs.microsoft.com/en-us/azure/security-center/security-center-permissions).

2. [Install the Azure CLI](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest) guide to get `az` installed and running. For macOS users, it is available using Homebrew:

    ```bash
    brew install azure-cli
    ```

3. Once you have the Azure CLI, it needs to be connected to the account you would like to use. If you already had the CLI installed, you may already have your credentials set up. To set up your credentials, or to update them anytime as needed, run:

    ```bash
    az login
    ```

  Follow any directions, including signing in from your browser, to enable your CLI.

1. You can insure that you are logged in by listing your account permissions:

    ```bash
    az account
    ```

    Which will return something like:
    ```bash
    $ az account
    [
      {
        "cloudName": "AzureCloud",
        "id": "12345678-abcd-efgh-9876-abc123456789",
        "isDefault": true,
        "name": "DC/OS Production Subscription",
        "state": "Enabled",
        "tenantId": "987654321-abcd-efgh-9876-abc123456789",
        "user": {
          "name": "myaccount@azuremesosphere.onmicrosoft.com",
          "type": "user"
        }
      }
    ]
    ```

1. Set the `ARM_SUBSCRIPTION_ID`. The current Terraform Provider for Azure requires that the default Azure subscription be set before terraform can start. provide the Azure subscription ID. You can set the default account with the following command:

    ```bash
    export ARM_SUBSCRIPTION_ID="desired-subscriptionid"
    ```

    As an example:

    ```bash
    export ARM_SUBSCRIPTION_ID="12345678-abcd-efgh-9876-abc123456789"
    ```

    Ensure it is set:

    ```bash
    echo $ARM_SUBSCRIPTION_ID
    ```